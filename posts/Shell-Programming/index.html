<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Shell Programming | TONY'S STUDIO</title><meta name="author" content="Tony Lewis"><meta name="copyright" content="Tony Lewis"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#300303"><meta name="description" content="Chapter Four - Shell"><meta property="og:type" content="article"><meta property="og:title" content="Shell Programming"><meta property="og:url" content="https://blog.tonys-studio.top/posts/Shell-Programming/"><meta property="og:site_name" content="TONY&#39;S STUDIO"><meta property="og:description" content="Chapter Four - Shell"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/04.jpeg"><meta property="article:published_time" content="2023-01-04T09:54:55.000Z"><meta property="article:modified_time" content="2025-09-29T13:33:46.102Z"><meta property="article:author" content="Tony Lewis"><meta property="article:tag" content="Linux"><meta property="article:tag" content="BUAA"><meta property="article:tag" content="System Programming"><meta property="article:tag" content="Shell"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/04.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Shell Programming",
  "url": "https://blog.tonys-studio.top/posts/Shell-Programming/",
  "image": "https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/04.jpeg",
  "datePublished": "2023-01-04T09:54:55.000Z",
  "dateModified": "2025-09-29T13:33:46.102Z",
  "author": [
    {
      "@type": "Person",
      "name": "Tony Lewis",
      "url": "https://www.tonys-studio.top"
    }
  ]
}</script><link rel="shortcut icon" href="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/favicon.svg"><link rel="canonical" href="https://blog.tonys-studio.top/posts/Shell-Programming/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//www.clarity.ms"><meta name="baidu-site-verification" content="codeva-R6O16YoeQt"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#300303")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),r=window.matchMedia("(prefers-color-scheme: dark)"),c=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(c.matches)a();else if(r.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}r.addEventListener("change",()=>{void 0===t.get("theme")&&(e.matches?o():a())})}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?68629f5da0a0c3347b896920fbf164b5";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}(),btf.addGlobalFn("pjaxComplete",()=>{_hmt.push(["_trackPageview",window.location.pathname])},"baidu_analytics")</script><script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/sthrplbt7c",(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script")</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:3,unescape:!1,pagination:{enable:!0,hitsPerPage:8},languages:{hits_empty:"No results found for: ${query}",hits_stats:"${hits} articles found"}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:300,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"Copy Successful",error:"Copy Failed",noSupport:"Browser Not Supported"},relativeDate:{homepage:!1,post:!1},runtime:"days",dateSuffix:{just:"Just now",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:{limitCount:256,languages:{author:"Author: Tony Lewis",link:"Link: ",source:"Source: TONY'S STUDIO",info:"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},lightbox:"fancybox",Snackbar:{chs_to_cht:"You have switched to Traditional Chinese",cht_to_chs:"You have switched to Simplified Chinese",day_to_night:"You have switched to Dark Mode",night_to_day:"You have switched to Light Mode",bgLight:"#871798",bgDark:"#C81025",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"Load More"},isPhotoFigcaption:!1,islazyloadPlugin:!1,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Shell Programming",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="stylesheet" href="/static/custom.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-footer-beautify@1.0.6/lib/runtime.min.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions={restartOnPushState:!1},btf.addGlobalFn("pjaxSend",()=>{Pace.restart()},"pace_restart")</script><link rel="stylesheet" href="/static/barber-shop.css"><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image:url(https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/background.png)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/avatar.png" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/missing.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">95</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">86</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">40</div></a></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-newspaper"></i><span> Posts</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-jedi fa-beat"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/04.jpeg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/logo.svg" alt="Logo"><span class="site-name">TONY'S STUDIO</span></a><a class="nav-page-title" href="/"><span class="site-name">Shell Programming</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span> Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-newspaper"></i><span> Posts</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> Gallery</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-jedi fa-beat"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Shell Programming</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-01-04T09:54:55.000Z" title="Created Jan. 4th, 2023 - 17:54:55 17:54:55">Jan. 4th, 2023 - 17:54:55</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-09-29T13:33:46.102Z" title="Updated Sep. 29th, 2025 - 21:33:46 21:33:46">Sep. 29th, 2025 - 21:33:46</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/BUAA/">BUAA</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/BUAA/System-Programming/">System Programming</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>13mins</span></span><span class="post-meta-separator">|</span><span data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span class="waline-pageview-count" data-path="/posts/Shell-Programming/"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/posts/Shell-Programming/#post-comment"><span class="waline-comment-count" data-path="/posts/Shell-Programming/"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 style="text-align:center;font-size:4em"><b>System Programming</b></h1><p style="text-align:center;font-size:2em"><i>" One vision, one purpose. "</i></p><p style="text-align:center">Copyright &copy; Tony's Studio 2020 - 2022</p><hr><h1 id="Chapter-Four-Shell"><a href="#Chapter-Four-Shell" class="headerlink" title="Chapter Four - Shell"></a>Chapter Four - Shell</h1><h2 id="4-1-Get-Ready-for-Shell"><a href="#4-1-Get-Ready-for-Shell" class="headerlink" title="4.1 Get Ready for Shell"></a>4.1 Get Ready for Shell</h2><h3 id="4-1-1-Redirect"><a href="#4-1-1-Redirect" class="headerlink" title="4.1.1 Redirect"></a>4.1.1 Redirect</h3><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> stdin: &lt;</span><br><span class="line">stdout: &gt; or 1&gt;</span><br><span class="line">stderr: 2&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="4-1-2-Pipe"><a href="#4-1-2-Pipe" class="headerlink" title="4.1.2 Pipe"></a>4.1.2 Pipe</h3><blockquote><p>Just wire the output of a command to the input of another command.</p><p>Here is a comprehensive example. Output of the first <code>cat</code>, which is the content of <code>a.txt</code> is wired to the input of the second <code>cat</code>, whose <code>stdout</code> is redirected to file <code>b.txt</code>, and <code>stderr</code> is redirected to <code>stdout</code>. However, there is no such thing like <code>2&gt;&gt;&amp;1</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> a.txt | <span class="built_in">cat</span> &gt;&gt;b.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure></blockquote><h3 id="4-1-3-Environment-Variable"><a href="#4-1-3-Environment-Variable" class="headerlink" title="4.1.3 Environment Variable"></a>4.1.3 Environment Variable</h3><h4 id="4-1-3-1-Add-Environment-Variable"><a href="#4-1-3-1-Add-Environment-Variable" class="headerlink" title="4.1.3.1 Add Environment Variable"></a>4.1.3.1 Add Environment Variable</h4><blockquote><p>Well, as you’ve known before, it is easy to add environment variables to current bash process.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> environment_variable=xxx</span><br></pre></td></tr></table></figure><p>But if you want this variable added to the bash permanently, you have to put that line to <code>~/.bashrc</code> file, which is loaded every time for initialization.</p></blockquote><h4 id="4-1-3-2-Get-Environment-Variable"><a href="#4-1-3-2-Get-Environment-Variable" class="headerlink" title="4.1.3.2 Get Environment Variable"></a>4.1.3.2 Get Environment Variable</h4><blockquote><p>For C, there are several ways to get environment variable.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Method 1, use global environ.</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">char</span>** environ;</span><br><span class="line"><span class="comment">// Method 2, use parameter of main.</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[], <span class="type">char</span>* envp[])</span> &#123;...&#125;</span><br><span class="line"><span class="comment">// Method 3, use function.</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="type">char</span>* value = getenvp(<span class="string">&quot;var_name&quot;</span>);</span><br></pre></td></tr></table></figure></blockquote><h4 id="4-1-3-3-Execute-Permission"><a href="#4-1-3-3-Execute-Permission" class="headerlink" title="4.1.3.3 Execute Permission"></a>4.1.3.3 Execute Permission</h4><blockquote><p>See [chmod](#1.4.8 chmod).</p></blockquote><h2 id="4-2-Shell-Programming"><a href="#4-2-Shell-Programming" class="headerlink" title="4.2 Shell Programming"></a>4.2 Shell Programming</h2><h3 id="4-2-1-Special-Symbols"><a href="#4-2-1-Special-Symbols" class="headerlink" title="4.2.1 Special Symbols"></a>4.2.1 Special Symbols</h3><blockquote><p><code>#!/bin/bash</code>: Must be at the first line to indicate interpreter.</p><p><code>#</code>: In-line comment. Use <code>\#</code> if you really want a <code>#</code>.</p><p><code>;</code>: Separate multiple commands. e.g. <code>echo Hello; echo there!</code></p><p><code>,</code>: Separate arithmetic expression, just like C. Here is an example.</p><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ a=$((b = <span class="number">9</span>, <span class="number">15</span> / <span class="number">3</span>))   <span class="comment"># check out 4.2.4</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$a</span>;</span><br><span class="line">$ 5</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$b</span></span><br><span class="line">$ 9</span><br></pre></td></tr></table></figure></blockquote><p><code>\</code>: Escape character, similar to what is in C.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> \<span class="variable">$num</span></span><br><span class="line">$ <span class="variable">$num</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="4-2-2-Run-Bash-Script"><a href="#4-2-2-Run-Bash-Script" class="headerlink" title="4.2.2 Run Bash Script"></a>4.2.2 Run Bash Script</h3><blockquote><p>There are several ways to run a bash script. If we directly run it by .&#x2F;filename, it must have execute permission. Use <code>chmod u+x script.sh</code>. And <code>#!/bin/bash</code> is preferred, although default bash will be selected if this is missing. The other two don’t need these.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./script.sh</span><br><span class="line">$ bash script.sh</span><br><span class="line">$ <span class="built_in">source</span> script.sh</span><br></pre></td></tr></table></figure><p>One more thing, why <code>./</code> is needed? Because not like what is in Windows, in Linux, current directory is not added to the environment path for… for security reason. Not any ordinary environment variable, but PATH. Once added, we can simply run a bash script just by its name.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:.	<span class="comment"># &#x27;:&#x27; connects variables</span></span><br></pre></td></tr></table></figure></blockquote><h3 id="4-2-3-Exit-Status"><a href="#4-2-3-Exit-Status" class="headerlink" title="4.2.3 Exit Status"></a>4.2.3 Exit Status</h3><blockquote><p>We can use <code>exit ret</code> to exit a bash script with a return value <code>ret</code>. 0 means success, anything else is considered not good. If <code>exit</code> is missing, then the return value depends on the last statement executed in the script.</p><p>For the return value, we are recommended to use 0 ~ 125, 126 means not executable, 127 means command not found, and 128+ means signal received. The last return value is stored in <code>$?</code>.</p><p>Like C, expression can be put together by some logic operator. <code>&amp;&amp;</code> and <code>||</code> remains the same meaning and function. But here in bash, 0 means true, others are regarded as false. For <code>&amp;&amp;</code>, if previous statement is false, bash will abandon latter statements and return false.</p></blockquote><h3 id="4-2-3-Variables"><a href="#4-2-3-Variables" class="headerlink" title="4.2.3 Variables"></a>4.2.3 Variables</h3><blockquote><p><em>“I always hate variables in script language.”</em></p></blockquote><h4 id="4-2-3-1-Declaration"><a href="#4-2-3-1-Declaration" class="headerlink" title="4.2.3.1 Declaration"></a>4.2.3.1 Declaration</h4><blockquote><p>Variable name is the same as C, but could not contain ‘$’. The value… I hate this. String value is just plain text if contains no space. Quote it with ‘’ or “” like <code>var=&quot;Hello there!&quot;</code>. These two are a little different, though.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ var=value                 <span class="comment"># no space, no $</span></span><br><span class="line">$ <span class="built_in">readonly</span> const=constant   <span class="comment"># read-only variable</span></span><br></pre></td></tr></table></figure><p>If you do not want a variable any more, you can use <code>unset</code> to… unset it. :P</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> var</span><br></pre></td></tr></table></figure></blockquote><h4 id="4-2-3-2-Quotes"><a href="#4-2-3-2-Quotes" class="headerlink" title="4.2.3.2 Quotes"></a>4.2.3.2 Quotes</h4><blockquote><p>In Bash, there are three types of quotes. A little tricky, huh?</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Three types of quote have different behaviors.</span></span><br><span class="line">$ plain=<span class="string">&#x27;this is $plain &quot;text&quot; $?&#x27;</span></span><br><span class="line">$ rich=<span class="string">&quot;this is not &#x27;<span class="variable">$plain</span>&#x27; text&quot;</span></span><br><span class="line">$ super=`<span class="built_in">echo</span> this is not \&#x27;<span class="variable">$rich</span>\&#x27; text`</span><br><span class="line"><span class="comment"># Here are the results.</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$plain</span></span><br><span class="line">this is <span class="variable">$plain</span> <span class="string">&quot;text&quot;</span> $?</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$rich</span></span><br><span class="line">this is not <span class="string">&#x27;this is $plain &quot;text&quot; $?&#x27;</span> text</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$super</span></span><br><span class="line">this is not <span class="string">&#x27;this is not &#x27;</span>this is <span class="variable">$plain</span> <span class="string">&quot;text&quot;</span> $?<span class="string">&#x27; text&#x27;</span> text</span><br></pre></td></tr></table></figure></blockquote><h4 id="4-2-3-3-Internal-Variables"><a href="#4-2-3-3-Internal-Variables" class="headerlink" title="4.2.3.3 Internal Variables"></a>4.2.3.3 Internal Variables</h4><blockquote><table><thead><tr><th align="center">Interval Variable</th><th align="center">Meaning</th></tr></thead><tbody><tr><td align="center"><code>$?</code></td><td align="center">last return value</td></tr><tr><td align="center"><code>$#</code></td><td align="center">number of parameters, just like <code>argc</code></td></tr><tr><td align="center"><code>$*</code></td><td align="center">all parameters passed to the script, just like <code>argv</code> as a string</td></tr><tr><td align="center"><code>$@</code></td><td align="center">all parameters, no IFS, more like <code>argv</code>, seperated strings</td></tr><tr><td align="center"><code>$$</code></td><td align="center">pid of current bash process, commonly used as temp file name</td></tr><tr><td align="center"><code>$!</code></td><td align="center">pid of the last process in background</td></tr><tr><td align="center"><code>$0</code></td><td align="center">current process name, just like <code>argv[0]</code></td></tr><tr><td align="center"><code>$1</code> to <code>$9</code></td><td align="center">parameters, just like <code>argv[i]</code></td></tr></tbody></table><p>For <code>$#</code> and <code>$@</code>, things can be really tricky. Here is a good example.</p><p>This example comes from here: <a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/129072/whats-the-difference-between-and">What’s the difference between $@ and $*</a>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;With *:&quot;</span></span><br><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> <span class="string">&quot;$*&quot;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;&lt;<span class="variable">$arg</span>&gt;&quot;</span>; <span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;With @:&quot;</span></span><br><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span>; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&quot;&lt;<span class="variable">$arg</span>&gt;&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>Its output can be as follows.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ifs A B <span class="string">&quot;C D&quot;</span></span><br><span class="line">With *:</span><br><span class="line">&lt;A B C D&gt;</span><br><span class="line">With @:</span><br><span class="line">&lt;A&gt;</span><br><span class="line">&lt;B&gt;</span><br><span class="line">&lt;C D&gt;</span><br></pre></td></tr></table></figure><p>For <code>$1</code> to <code>$9</code>, we can use <code>shift</code> to shit them. After shift, <code>$1</code> will become <code>$2</code>, and so on. But this won’t affect <code>$0</code>.</p></blockquote><h4 id="4-2-3-4-Variable-Replacement"><a href="#4-2-3-4-Variable-Replacement" class="headerlink" title="4.2.3.4 Variable Replacement"></a>4.2.3.4 Variable Replacement</h4><blockquote><p>There are some advanced, but tricky variable assignment.</p><p><code>var=$&#123;param:-word&#125;</code>: If <code>param</code> is set, then <code>var</code> is set to <code>param</code>. Or <code>var</code> is set to <code>word</code>, like a default value.</p><p><code>var=$&#123;param:=word&#125;</code>: If <code>param</code> is set, then <code>var</code> is set to param. Or both <code>var</code> and <code>param</code> is set to <code>word</code>.</p><p><code>var=$&#123;param:?word&#125;</code>: If <code>param</code> is set, then <code>var</code> is set to param. Otherwise, script will display error info and exit with return value 1. The error info is as follows.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-bash: param: word                       <span class="comment"># word is not null</span></span><br><span class="line">-bash: param: parameter null or not <span class="built_in">set</span>  <span class="comment"># word is omitted var=$&#123;param:?&#125;</span></span><br></pre></td></tr></table></figure><p><code>var=$&#123;param:+word&#125;</code>: If <code>param</code> is set, then <code>var</code> is set to <code>word</code>. Or <code>var</code> is set to null.</p><p>Err… you know, we can simply use <code>$&#123;param:-word&#125;</code> alone… It’s just a value, and this is it.</p></blockquote><h3 id="4-2-4-Expression"><a href="#4-2-4-Expression" class="headerlink" title="4.2.4 Expression"></a>4.2.4 Expression</h3><blockquote><p><em>“I hate expressions in these script languages.”</em></p></blockquote><h4 id="4-2-4-1-Variables-in-Expression"><a href="#4-2-4-1-Variables-in-Expression" class="headerlink" title="4.2.4.1 Variables in Expression"></a>4.2.4.1 Variables in Expression</h4><blockquote><p>Just add dollar sign before a variable to use it. For command variables, both $() and &#96;&#96; are OK.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$variable</span></span><br><span class="line">$(<span class="built_in">command</span>)</span><br><span class="line">`<span class="built_in">command</span>`</span><br></pre></td></tr></table></figure><p>For arithmetic variables, use <code>$((...))</code> to wrap them, or use <code>expr</code> command. Or more directly, use <code>let</code> command.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ a=$((<span class="number">3</span> + <span class="number">4</span> + <span class="variable">$b</span>))</span><br><span class="line">$ c=$(<span class="built_in">expr</span> 5 + <span class="variable">$d</span> + 7)</span><br><span class="line">$ <span class="built_in">let</span> a=a++</span><br><span class="line">$ <span class="built_in">let</span> a=a+1+5</span><br><span class="line">$ <span class="built_in">let</span> <span class="string">&quot;a = a * (3 + 4)&quot;</span></span><br></pre></td></tr></table></figure><p>For a more powerful way to use variables, you can consider <code>$&#123;&#125;</code>. In this way, I guess, number is regarded as string. However, in x64 architecture, numbers seem to be a 64 bits signed value in calculation.</p><table><thead><tr><th align="center">format</th><th align="center">return value</th></tr></thead><tbody><tr><td align="center"><code>$var</code> or <code>$&#123;var&#125;</code></td><td align="center">value of the variable</td></tr><tr><td align="center"><code>$&#123;#var&#125;</code></td><td align="center">length of the variable</td></tr><tr><td align="center"><code>$&#123;var:start&#125;</code></td><td align="center">substring of the variable from start to end</td></tr><tr><td align="center"><code>$&#123;var:start:length&#125;</code></td><td align="center">substring of the variable from start in given length, or till the end</td></tr></tbody></table></blockquote><h4 id="4-2-4-2-Condition-Expression"><a href="#4-2-4-2-Condition-Expression" class="headerlink" title="4.2.4.2 Condition Expression"></a>4.2.4.2 Condition Expression</h4><blockquote><p>In Bash, we can use <code>test condition</code> to check condition, or just <code>[condition]</code>. There are four types of condition check, string, number, logic and file.</p><p>For string comparation, there are five operations. Be aware of the space around ‘[‘, ‘]’ and ‘&#x3D;’.</p><table><thead><tr><th align="center">test</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center">[ str1 &#x3D; str2 ] or [ str1 &#x3D;&#x3D; str2 ]</td><td align="center">return true if str1 and str2 are the same</td></tr><tr><td align="center">[ str1 !&#x3D; str2]</td><td align="center">return true if str1 and str2 are different</td></tr><tr><td align="center">[ str ]</td><td align="center">return true if str is not null</td></tr><tr><td align="center">[ -n str ]</td><td align="center">return true if length of str is greater than zero</td></tr><tr><td align="center">[ -z str ]</td><td align="center">return true if length of str is zero</td></tr></tbody></table><p>For arithmetic comparation, we can also use condition expression.</p><table><thead><tr><th align="center">test</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center">[ a -eq b ]</td><td align="center">return true if a &#x3D;&#x3D; b</td></tr><tr><td align="center">[ a -ne b ]</td><td align="center">return true if a !&#x3D; b</td></tr><tr><td align="center">[ a -ge b]</td><td align="center">return true if a &gt;&#x3D; b</td></tr><tr><td align="center">[ a -le b ]</td><td align="center">return true if a &lt;&#x3D; b</td></tr><tr><td align="center">[ a -gt b ]</td><td align="center">return true if a &gt; b</td></tr><tr><td align="center">[ a -lt b ]</td><td align="center">return true if a &lt; b</td></tr></tbody></table><p>Or, we can just use ((expression)) to replace [ condition ], which is easier to understand.</p><p>For logic condition, it is quite like arithmetic.</p><table><thead><tr><th align="center">test</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center">!expr</td><td align="center">not</td></tr><tr><td align="center">expr1 -a expr2</td><td align="center">and</td></tr><tr><td align="center">expr1 -o expr2</td><td align="center">or</td></tr></tbody></table><p>For file condition, things are almost the same.</p><table><thead><tr><th align="center">test</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center">[ -d file ]</td><td align="center">return true if file is a directory</td></tr><tr><td align="center">[ -f file ]</td><td align="center">return true if file is a file</td></tr><tr><td align="center">[ -r file ]</td><td align="center">return true if file is readable</td></tr><tr><td align="center">[ -w file ]</td><td align="center">return true if file is writable</td></tr><tr><td align="center">[ -x file ]</td><td align="center">return true if file is executable</td></tr><tr><td align="center">[ -s file ]</td><td align="center">return true if file size greater than zero</td></tr></tbody></table></blockquote><h4 id="4-2-4-3-Branch-and-Loop"><a href="#4-2-4-3-Branch-and-Loop" class="headerlink" title="4.2.4.3 Branch and Loop"></a>4.2.4.3 Branch and Loop</h4><blockquote><p>It’s a little wired to have <code>If-then-elif-then-else</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition ]; <span class="keyword">then</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">elif</span> [ condition ]; <span class="keyword">then</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>It’s even more wired with switch-case. :(</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> expression <span class="keyword">in</span></span><br><span class="line">	pattern1)</span><br><span class="line">		statements</span><br><span class="line">		;;</span><br><span class="line">	pattern2)</span><br><span class="line">		statements</span><br><span class="line">		;;</span><br><span class="line">	*)			<span class="comment"># default</span></span><br><span class="line">		statements</span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><p>There are three kinds of loop in Bash, <code>while</code>, <code>until</code> and <code>for</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># loop while condition is true</span></span><br><span class="line"><span class="keyword">while</span> [ condition ]; <span class="keyword">do</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># loop until condition is true</span></span><br><span class="line"><span class="keyword">until</span> [ condition ]; <span class="keyword">do</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># for is a little tricky</span></span><br><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> [list]; <span class="keyword">do</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># for can also be like this in a simpler format</span></span><br><span class="line"><span class="keyword">for</span> ((i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)); <span class="keyword">do</span></span><br><span class="line">	<span class="comment"># statements</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>Hmm… An extra example, I think, redirect can be appended to loop.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># print the 10th line in a file</span></span><br><span class="line">file=<span class="string">&quot;test.txt&quot;</span></span><br><span class="line">i=0</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">	i=$((<span class="variable">$i</span>+<span class="number">1</span>))</span><br><span class="line">	<span class="keyword">if</span> ((<span class="variable">$i</span>==<span class="number">10</span>)); <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line">		<span class="built_in">break</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$file</span></span><br></pre></td></tr></table></figure><p>For <code>for</code> loop, list is a string or array, for example, we can write this.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1 2 3; <span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>And it will print things out.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p>Actually you can refer to previous example with [$@ and $*](#4.2.3.3 Internal Variables).</p></blockquote><h3 id="4-2-5-Array"><a href="#4-2-5-Array" class="headerlink" title="4.2.5 Array"></a>4.2.5 Array</h3><blockquote><p>Ahh… tired… leave it alone. :(</p></blockquote><h3 id="4-2-x-Example"><a href="#4-2-x-Example" class="headerlink" title="4.2.x Example"></a>4.2.x Example</h3><blockquote><p><em>“Talk is cheap, show me the code.”</em></p><p>Here is a comprehensive example. The script has one parameter, and its meaning is as follows.</p><ul><li><code>mine</code>: find all files that belongs to the current user under the current directory and print their filenames. (not recursively)</li><li><code>largest</code>：print the largest file under the current directory. (not recursively)</li><li><code>expand</code>: move all files recursively to the current directory, and then delete all subfolders (they should be empty now).</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">dir</span>=`<span class="built_in">pwd</span>`</span><br><span class="line"><span class="comment"># A recursive function example.</span></span><br><span class="line"><span class="keyword">function</span> move &#123;</span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">&quot;<span class="subst">$(ls -A $&#123;1&#125;)</span>&quot;</span> ]; <span class="keyword">then</span>	<span class="comment"># dir must not be empty</span></span><br><span class="line">		<span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;1&#125;</span>/*; <span class="keyword">do</span>	    <span class="comment"># empty dir will cause file match plain text </span></span><br><span class="line">			filename=`<span class="built_in">basename</span> <span class="variable">$file</span>`</span><br><span class="line">			<span class="keyword">if</span> [ -d <span class="variable">$filename</span> ]; <span class="keyword">then</span></span><br><span class="line">				new=<span class="string">&quot;<span class="variable">$&#123;1&#125;</span>/<span class="variable">$filename</span>&quot;</span></span><br><span class="line">                  move <span class="variable">$new</span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">if</span> [ <span class="variable">$&#123;1&#125;</span> != <span class="variable">$dir</span> ]; <span class="keyword">then</span></span><br><span class="line">					old=<span class="string">&quot;<span class="variable">$&#123;1&#125;</span>/<span class="variable">$filename</span>&quot;</span></span><br><span class="line">                      new=<span class="string">&quot;<span class="variable">$dir</span>/<span class="variable">$filename</span>&quot;</span></span><br><span class="line">                      <span class="built_in">mv</span> <span class="variable">$old</span> <span class="variable">$new</span></span><br><span class="line">                      <span class="comment"># echo &quot;Move $old to $new&quot;</span></span><br><span class="line">				<span class="keyword">fi</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line">		<span class="keyword">done</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># empty string check</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$1</span> ]; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Usage: ./manage.sh OPERATION&quot;</span></span><br><span class="line">	<span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># string compa</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">&quot;mine&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">	flag=0</span><br><span class="line">	<span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;dir&#125;</span>/*; <span class="keyword">do</span></span><br><span class="line">		filename=`<span class="built_in">basename</span> <span class="variable">$file</span>`</span><br><span class="line">		<span class="keyword">if</span> [ <span class="variable">$filename</span> == `<span class="built_in">basename</span> <span class="variable">$0</span>` ]; <span class="keyword">then</span>		<span class="comment"># we don&#x27;t want itself</span></span><br><span class="line">			<span class="built_in">continue</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">		<span class="keyword">if</span> [ -d <span class="variable">$filename</span> ]; <span class="keyword">then</span>		<span class="comment"># we don&#x27;t want a directory</span></span><br><span class="line">			<span class="built_in">continue</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">		<span class="keyword">if</span> [ -O <span class="variable">$filename</span> ]; <span class="keyword">then</span>		<span class="comment"># if belongs to the current user</span></span><br><span class="line">			<span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$filename</span> &quot;</span></span><br><span class="line">			flag=1</span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="keyword">if</span> (( <span class="variable">$flag</span> == <span class="number">1</span> )); <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> == <span class="string">&quot;largest&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">	largestSize=-1</span><br><span class="line">	largestFile=<span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">&quot;<span class="subst">$(ls -A $&#123;dir&#125;)</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;dir&#125;</span>/*; <span class="keyword">do</span></span><br><span class="line">			filename=`<span class="built_in">basename</span> <span class="variable">$file</span>`</span><br><span class="line">			<span class="keyword">if</span> [ <span class="variable">$filename</span> == `<span class="built_in">basename</span> <span class="variable">$0</span>` ]; <span class="keyword">then</span></span><br><span class="line">	         	<span class="built_in">continue</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line">			<span class="keyword">if</span> [ -d <span class="variable">$filename</span> ]; <span class="keyword">then</span></span><br><span class="line">				<span class="built_in">continue</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line">			size=$(<span class="built_in">stat</span> -c %s <span class="string">&quot;<span class="variable">$filename</span>&quot;</span>)</span><br><span class="line">			<span class="keyword">if</span> (( <span class="variable">$size</span> &gt; <span class="variable">$largestSize</span> )); <span class="keyword">then</span></span><br><span class="line">				largestSize=<span class="variable">$size</span></span><br><span class="line">	             largestFile=<span class="variable">$filename</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line">		<span class="keyword">done</span></span><br><span class="line">		<span class="keyword">if</span> [ <span class="variable">$largestFile</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">			<span class="built_in">echo</span> <span class="string">&quot;Largest file: <span class="variable">$largestFile</span>&quot;</span></span><br><span class="line">		<span class="keyword">fi</span></span><br><span class="line">	<span class="keyword">fi</span>	<span class="comment"># if [ &quot;$(ls -A $&#123;dir&#125;)&quot; ]; then</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> == <span class="string">&quot;expand&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">	move <span class="variable">$dir</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">&quot;<span class="subst">$(ls -A $&#123;dir&#125;)</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;dir&#125;</span>/*; <span class="keyword">do</span></span><br><span class="line">			filename=`<span class="built_in">basename</span> <span class="variable">$file</span>`</span><br><span class="line">	         <span class="keyword">if</span> [ -d <span class="variable">$filename</span> ]; <span class="keyword">then</span></span><br><span class="line">				<span class="built_in">rm</span> -r <span class="variable">$filename</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line">		<span class="keyword">done</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;Invalid argument! [mine, largest, expand]&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></blockquote><hr><p style="text-align:center;font-size:2em"><i>" Do or do not. There is no try. "</i></p><p style="text-align:center">Copyright &copy; Tony's Studio 2020 - 2022</p><h1 style="text-align:center;font-size:4em"><b>- EOF -</b></h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.tonys-studio.top">Tony Lewis</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://blog.tonys-studio.top/posts/Shell-Programming/">https://blog.tonys-studio.top/posts/Shell-Programming/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/BUAA/">BUAA</a><a class="post-meta__tags" href="/tags/System-Programming/">System Programming</a><a class="post-meta__tags" href="/tags/Shell/">Shell</a></div><div class="post-share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_wechat"></a><a class="a2a_button_qzone"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/Linux-File-System/" title="Linux File System"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/22/11.jpeg" onerror='onerror=null,src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Linux File System</div></div><div class="info-2"><div class="info-item-1">Chapter Five - File System</div></div></div></a><a class="pagination-related" href="/posts/Linux-Programming/" title="Linux Programming"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/02.jpeg" onerror='onerror=null,src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Linux Programming</div></div><div class="info-2"><div class="info-item-1">Chapter Three - Linux Programming</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/Inter-Process-Communication/" title="Inter-Process Communication"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/09/05.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:56:03</div><div class="info-item-2">Inter-Process Communication</div></div><div class="info-2"><div class="info-item-1">Chapter Seven - Inter Process Communication</div></div></div></a><a class="pagination-related" href="/posts/Inter-Thread-Communication/" title="Inter-Thread Communication"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/06/03.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:56:19</div><div class="info-item-2">Inter-Thread Communication</div></div><div class="info-2"><div class="info-item-1">Chapter Eight - Inter Thread Communication</div></div></div></a><a class="pagination-related" href="/posts/Linux-Commands/" title="Linux Commands"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/22/05.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:54:08</div><div class="info-item-2">Linux Commands</div></div><div class="info-2"><div class="info-item-1">Chapter One - Linux Commands</div></div></div></a><a class="pagination-related" href="/posts/Linux-File-System/" title="Linux File System"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/22/11.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:55:33</div><div class="info-item-2">Linux File System</div></div><div class="info-2"><div class="info-item-1">Chapter Five - File System</div></div></div></a><a class="pagination-related" href="/posts/Meet-Linux/" title="Meet Linux"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/02/07.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:26:20</div><div class="info-item-2">Meet Linux</div></div><div class="info-2"><div class="info-item-1">Chapter Zero - Meet Linux</div></div></div></a><a class="pagination-related" href="/posts/Linux-Programming/" title="Linux Programming"><img class="cover" src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/02.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> Jan. 4th, 2023 - 17:54:37</div><div class="info-item-2">Linux Programming</div></div><div class="info-2"><div class="info-item-1">Chapter Three - Linux Programming</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/avatar.png" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/missing.gif"' alt="avatar"></div><div class="author-info-name">Tony Lewis</div><div class="author-info-description">Do or do not. There is no try.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">95</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">86</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">40</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lord-Turmoil"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Lord-Turmoil" target="_blank" title="Github"><i class="fa-brands fa-github"></i></a><a class="social-icon" href="mailto:swift-phantom@outlook.com" target="_blank" title="Email"><i class="fa-solid fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/2030942344" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Hello there!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">System Programming</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter-Four-Shell"><span class="toc-text">Chapter Four - Shell</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Get-Ready-for-Shell"><span class="toc-text">4.1 Get Ready for Shell</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-Redirect"><span class="toc-text">4.1.1 Redirect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-Pipe"><span class="toc-text">4.1.2 Pipe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-Environment-Variable"><span class="toc-text">4.1.3 Environment Variable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-1-Add-Environment-Variable"><span class="toc-text">4.1.3.1 Add Environment Variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-2-Get-Environment-Variable"><span class="toc-text">4.1.3.2 Get Environment Variable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-3-Execute-Permission"><span class="toc-text">4.1.3.3 Execute Permission</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-Shell-Programming"><span class="toc-text">4.2 Shell Programming</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-Special-Symbols"><span class="toc-text">4.2.1 Special Symbols</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-Run-Bash-Script"><span class="toc-text">4.2.2 Run Bash Script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-Exit-Status"><span class="toc-text">4.2.3 Exit Status</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-Variables"><span class="toc-text">4.2.3 Variables</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-1-Declaration"><span class="toc-text">4.2.3.1 Declaration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-2-Quotes"><span class="toc-text">4.2.3.2 Quotes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-3-Internal-Variables"><span class="toc-text">4.2.3.3 Internal Variables</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-4-Variable-Replacement"><span class="toc-text">4.2.3.4 Variable Replacement</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-Expression"><span class="toc-text">4.2.4 Expression</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-1-Variables-in-Expression"><span class="toc-text">4.2.4.1 Variables in Expression</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-2-Condition-Expression"><span class="toc-text">4.2.4.2 Condition Expression</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-3-Branch-and-Loop"><span class="toc-text">4.2.4.3 Branch and Loop</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-Array"><span class="toc-text">4.2.5 Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-x-Example"><span class="toc-text">4.2.x Example</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">- EOF -</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/A-Fancy-And-Practical-Zsh-Configuration/" title="A Fancy and Practical Zsh Configuration"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/01/07.jpeg" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="A Fancy and Practical Zsh Configuration"></a><div class="content"><a class="title" href="/posts/A-Fancy-And-Practical-Zsh-Configuration/" title="A Fancy and Practical Zsh Configuration">A Fancy and Practical Zsh Configuration</a><time datetime="2025-09-26T14:15:54.000Z" title="Created Sep. 26th, 2025 - 22:15:54 22:15:54">Sep. 26th, 2025 - 22:15:54</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Lambda-Calculus-A-Preliminary-View/" title="Lambda Calculus: A Preliminary View"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/03/01.jpeg" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="Lambda Calculus: A Preliminary View"></a><div class="content"><a class="title" href="/posts/Lambda-Calculus-A-Preliminary-View/" title="Lambda Calculus: A Preliminary View">Lambda Calculus: A Preliminary View</a><time datetime="2025-09-16T08:25:34.000Z" title="Created Sep. 16th, 2025 - 16:25:34 16:25:34">Sep. 16th, 2025 - 16:25:34</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Music-Notation-with-Avid-Sibelius/" title="Music Notation With Avid Sibelius"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/posts/Music-Notation-with-Avid-Sibelius.jpg" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="Music Notation With Avid Sibelius"></a><div class="content"><a class="title" href="/posts/Music-Notation-with-Avid-Sibelius/" title="Music Notation With Avid Sibelius">Music Notation With Avid Sibelius</a><time datetime="2025-09-03T04:34:54.000Z" title="Created Sep. 3rd, 2025 - 12:34:54 12:34:54">Sep. 3rd, 2025 - 12:34:54</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Getting-Started-with-Coq/" title="Getting Started With Coq"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/05/07.jpeg" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="Getting Started With Coq"></a><div class="content"><a class="title" href="/posts/Getting-Started-with-Coq/" title="Getting Started With Coq">Getting Started With Coq</a><time datetime="2025-08-08T04:30:12.000Z" title="Created Aug. 8th, 2025 - 12:30:12 12:30:12">Aug. 8th, 2025 - 12:30:12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/Game-Engine-0-to-1-02-Something-on-the-Screen/" title="Game Engine 0 to 1 (02): Something on the Screen"><img src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/mando/10/09.jpeg" onerror='this.onerror=null,this.src="https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/404.png"' alt="Game Engine 0 to 1 (02): Something on the Screen"></a><div class="content"><a class="title" href="/posts/Game-Engine-0-to-1-02-Something-on-the-Screen/" title="Game Engine 0 to 1 (02): Something on the Screen">Game Engine 0 to 1 (02): Something on the Screen</a><time datetime="2025-07-04T12:07:57.000Z" title="Created Jul. 4th, 2025 - 20:07:57 20:07:57">Jul. 4th, 2025 - 20:07:57</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://tonys-studio-1308383348.cos.ap-beijing.myqcloud.com/blog/static/cover/boba/04/04.jpeg)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Tony Lewis</span></div><div class="footer_custom_text">No bird soars too high if he soars on his own wings</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const e=()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>(e=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"forest";e.forEach((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a=`%%{init:{ 'theme':'${t}'}}%%\n`+d.textContent,i=mermaid.render(r,a),m=e=>{d.insertAdjacentHTML("afterend",e)};"string"==typeof i?m(i):i.then(({svg:e})=>m(e))})})(e);btf.addGlobalFn("themeChange",t,"mermaid"),window.loadMermaid?t():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(t)};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{let n=window.walineFn||null;const e="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t=(n,t=document,i=window.location.pathname)=>{const o=n({el:t.querySelector("#waline-wrap"),serverURL:"https://comment.tonys-studio.top",pageview:!0,dark:'html[data-theme="dark"]',comment:!0,path:i});e&&(window.shuoshuoComment.destroyWaline=()=>{o.destroy(),t.children.length&&(t.innerHTML="",t.classList.add("no-comment"))})},i=(e,i)=>{n?t(n,e,i):btf.getCSS("https://cdn.jsdelivr.net/npm/@waline/client@2/dist/waline.min.css").then(()=>import("https://cdn.jsdelivr.net/npm/@waline/client@2/dist/waline.min.js")).then(({init:o})=>{n=o||Waline.init,t(n,e,i),window.walineFn=n})};e?window.shuoshuoComment={loadComment:i}:setTimeout(i,0)})()</script></div><script src="/static/custom.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> Loading Database</span></div><div class="local-search-input"><input placeholder="Looking for something?🔍" type="text"></div><hr><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>function butterfly_footer_beautify_injector_config(){var e=document.getElementById("footer");console.log("已挂载butterfly_footer_beautify"),e.insertAdjacentHTML("beforeend",'<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="Framework Hexo" title=""><img src="https://img.shields.io/badge/Frame-Hexo%205.4.2-blue?style=flat-square&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="Theme Butterfly" title=""><img src="https://img.shields.io/badge/Theme-Butterfly%205.4.3-6513df?style=flat-square&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="All articles in this blog are licensed under CC BY-NC-SA 4.0 unless stating additionally." title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat-square&amp;logo=Claris" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_footer_beautify_injector_config()</script></body></html>